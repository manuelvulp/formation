"use strict";var Formation=function(a){var b=this;$.extend(b,a),b._notValidatedInputs=[],b._validating=!1,b.selector.submit(function(){return b._validating||(b.validating&&b.validating(),b.validate().then(function(){return b.success()},function(){b.error(b._notValidatedInputs)})),!1})};Formation.prototype.submit=function(){self.selector.submit()},Formation.prototype.validate=function(){var a=this,b=$.Deferred();return a._validating=!0,a._validatedInputs=[],a._notValidatedInputs=[],a._promises=[],a.selector&&(a._formSelector="function"==typeof a.selector?a.selector():$(a.selector)),$.each(a.inputs,function(b,c){var d;d="function"==typeof c.selector?a._formSelector?a._formSelector.find(c.selector()):c.selector():a._formSelector?a._formSelector.find(c.selector):c.selector;var e=d.val();a._promises.push(a.handleValidator(c,e))}),$.when.apply($,a._promises).then(function(){a._validatedInputs.length===a.inputs.length?a.success():a.error(a._notValidatedInputs)},function(){a.error(a._notValidatedInputs)}).always(function(){a._validating=!1}),b.promise()},Formation.prototype.handleValidator=function(a,b){var c=this,d=$.Deferred();return a.validator?("function"==typeof a.validator?(a.validating&&a.validating(a,b),$.when(a.validator(a,b)).then(function(e){e?d.resolve(c.handleSuccess(a,b)):d.resolve(c.handleError(a,b))},function(){d.reject(c.handleError(a,b))})):a.validator.test(b)?d.resolve(c.handleSuccess(a,b)):d.resolve(c.handleError(a,b)),d.promise()):1},Formation.prototype.handleSuccess=function(a,b){return this._validatedInputs.push(a),a.success?a.success(a,b):void 0,1},Formation.prototype.handleError=function(a,b){return this._notValidatedInputs.push(a),a.error?a.error(a,b):void 0,0},Formation.VALIDATORS={EMAIL:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/};